var VideoRichHoverHandler,VideoRichHover;(function(n){function ai(n,t,i,u){ni&&(!i||!i.bindInfos||i.bindInfos.length<1||(r[n]=i,t&&sj_evt.bind(kt,vi),ti=u,et(i)))}function vi(n){var t,i;if(n)if(t=null,n.length>1&&(t=n[1]),!t||t.length<1)for(i in r)et(r[i]?r[i]:null);else et(r[t]?r[t]:null)}function et(n){var h,r,u,i,f,e,o,t,c;if(n!=null&&(h=n.bindInfos,r=ri(h,n.useClassAsTargetInfoKey),r!=null&&!(r.length<1))){for(u=0;u<r.length;u++)if(i=r[u],i!==null&&i.elements!==null&&i.targetInfo!==null)for(f=i.targetInfo,e=0;e<i.elements.length;e++)if((o=i.elements[e],t=ot(o,f),t)&&(c=yi(n),!pi(t)))switch(c){case VRHEnums.HoverPlayType.BackgroundPlay:t.setAttribute(y,null);break;case VRHEnums.HoverPlayType.HoverLoopPlay:t.setAttribute(it,null);s(t,"mousemove",cr,!1,!1);ii(t,o,n,f);break;case VRHEnums.HoverPlayType.HoverPlay:t.setAttribute(tt,null);s(t,"mousemove",hr,!1,!1);ii(t,o,n,f);break;case VRHEnums.HoverPlayType.Null:t.setAttribute(tt,null)}s(_w,"focus",nr,!0);ti||s(_w,"blur",ir,!0);n.enAutoPlayOnLoad&&sj_evt.bind("onP1",br,!0)}}function ii(n,i,r,u){if(s(n,"touchstart",sr,!1,!1),s(i,"mouseout",ei,!1,!1),r.entabhover===!0){var f=bi(n,u);f&&s(f,"focus",tr,!1,!1)}r.isBoundarySizePersisted&&i.setAttribute(t.BoundarySizePersistedAttachedStr,null);r.enBoundarySizeScale&&i.setAttribute(t.BoundarySizeScaleAttachedStr,null)}function yi(n){var t=VRHEnums.HoverPlayType.Null;return n.enBgPlay?t=VRHEnums.HoverPlayType.BackgroundPlay:n.enHoverControl&&(t=n.enLoopPlayOnHover?VRHEnums.HoverPlayType.HoverLoopPlay:VRHEnums.HoverPlayType.HoverPlay),t}function pi(n){return n==null?!0:o(n,tt)||o(n,y)||o(n,it)}function wi(n){var i=Array(),a,u,h,o,l,e,s,v,c;for(a in r)u=r[a],u&&(n&&u.enAutoPlayOnLoad||u.enAutoPlayNext)&&(h=ri(u.bindInfos,u.useClassAsTargetInfoKey),h!=null&&h.length>0&&(i=i.concat(h)));if(i.length<1)return null;for(o=0;o<i.length;o++)if(l=i[o].targetInfo,e=i[o].elements,l!==null&&e!==null&&!(e.length<1))for(s=0;s<e.length;s++)if((v=!f(e[s],t.BoundarySizeScaleAttachedStr),c=ot(e[s],l,v),c!==null)&&!f(c,vt))return c;return null}function bi(n,t){var r,i;if(!t||!n)return null;if(l(n,t.tcn)){if(r=t.ttcn,!r||r.length<1)return null;i=n;do{if(i&&l(i,r))return i;i=i.parentElement}while(i&&i!=_d.body);return null}return null}function ki(n){var u,i,f,t,e,r;if(!n||n.length<1)return null;for(u=[],i=0;i<n.length;i++)f=n[i].id,t=n[i].target,f&&t&&t.tcn&&t.ttcn&&(e=_ge(f),e&&(r=a(t.ttcn,e),r&&r.length>0&&u.push({targetInfo:t,elements:r})));return u}function ri(n,t){var f,e,u,r,s,i,o;if(!n||n.length<1)return null;for(f=[],i=0;i<n.length;i++)if(e=n[i].id,u=n[i].target,e&&u&&u.bcn&&u.tcn&&(r=null,t?r=di(e):(s=_ge(e),s&&(r=[],r.push(s))),r&&r.length>0))for(i=0;i<r.length;i++)o=a(u.bcn,r[i]),o&&o.length>0&&f.push({targetInfo:u,elements:o});return f.length>0?f:null}function di(n){var t,r,i;if(!n)return null;if(t=a(n,_d),t){for(r=[],i=0;i<t.length;i++)f(t[i],at)||(r.push(t[i]),t[i].setAttribute(at,null));return r}return null}function ot(n,t,i){var u,f,r;return(i===void 0&&(i=!1),n&&t&&(u=ct(n,p),u))?(f=t.tcn===t.bcn?n:b(t.tcn,n),i)?(r=lt(u),!r||!r.cid)?null:r.smturl&&r.smturl!=null&&r.smturl.length>0?f:null:f:null}function gi(n){var t=Array(),c,o,f,i,s,u,e,h;for(c in r)o=r[c],o&&(f=ki(o.bindInfos),f!=null&&f.length>0&&(t=t.concat(f)));if(t.length<1)return null;for(i=0;i<t.length;i++)if(s=t[i].targetInfo,u=t[i].elements,s!==null&&u!==null&&!(u.length<1))for(e=0;e<u.length;e++)if(u[e]==n&&(h=ot(n,s,!1),h!==null))return h;return null}function st(n){sj_evt.fire(n,VRHEnums.HoveredElementType.Adult);sj_evt.fire(n,VRHEnums.HoveredElementType.Algo)}function nr(){st(t.HoverEnableEvt)}function tr(n){var i=sj_et(n),t=gi(i);t&&(g(t,VRHEnums.TriggerType.TabTrigger),k=!0)}function ir(){_d.activeElement!=null&&(_d.activeElement==sj_b||ui(_d.activeElement)?st(t.HoverEnableEvt):(v(),st(t.HoverDisableEvt)))}function ht(n){for(var t=n,r;t!=null;){if(r=ct(t,p),r)return r;if(l(t,rt))return ht(i);t=t.parentNode&&t.parentNode!=t?t.parentNode:null}return null}function ct(n,t){var i,r;if(n){if(f(n,t)===!0)return n;if(n.children&&n.children.length>0)for(i=0;i<n.children.length;i++)if(r=ct(n.children[i],t),r)return r}return null}function rr(n,t,i){for(var r=n;r;){if(r.id==i)return null;if(l(r,t))return r;r=r.parentElement}return null}function ur(n,t){var i=_ge(n);return i==null?null:b(t,i)}function fr(n,t){return e(n,t,VRHEnums.HoverTargetType.Boundary)}function er(n,t){return e(n,t,VRHEnums.HoverTargetType.Target)}function e(n,t,i){var s,h,e;if(n&&t&&(s=r[t]?r[t].bindInfos:null,s&&s.length>0))for(h=0;h<s.length;h++){var u=s[h],f=null,o=null,c=null,l=!1;switch(i){case VRHEnums.HoverTargetType.Boundary:f=u.target.bcn;break;case VRHEnums.HoverTargetType.CaptionSource:f=u.target.bcn;c=u.target.cscn;l=!0;break;case VRHEnums.HoverTargetType.Target:f=u.target.tcn;break;case VRHEnums.HoverTargetType.PlayerBoundary:f=u.target.pbcn;o=u.target.ppid;break;case VRHEnums.HoverTargetType.MMSTBoundary:f=u.target.mbcn;o=u.target.mpid;break;case VRHEnums.HoverTargetType.CaptionTarget:f=u.target.ctcn;o=u.target.tpid;break;case VRHEnums.HoverTargetType.LinkTarget:f=u.target.ltcn;o=u.target.tpid;break;case VRHEnums.HoverTargetType.ScaleCanvas:return _ge(u.target.scid);case VRHEnums.HoverTargetType.DuplicateSource:f=u.target.dscn;break;case VRHEnums.HoverTargetType.DuplicateTarget:return _ge(u.target.dtid)}if(f&&(e=null,o!=null?e=ur(o,f):(e=rr(n,f,u.id),e&&l&&(e=c!=null?b(c,e):null)),e))return e}return null}function ui(n){return gt(rt,n)!=null}function or(n){if(n&&typeof n.getBoundingClientRect=="function"){var i=n.getBoundingClientRect(),r=i.x,u=i.y,t=[];return _d.elementsFromPoint?t=_d.elementsFromPoint(r,u):_d.msElementsFromPoint&&(t=_d.msElementsFromPoint(r,u)),(t===null||t===void 0?void 0:t.length)&&t.findIndex(function(t){return t.id!==n.id&&l(t,rt)})>-1}}function lt(n){var t=null,r=null,i=null,e=null,u=null;if(f(n,p)===!0&&(u=o(n,p)),u==null)return null;try{t=JSON.parse(u);i=t.capt;i&&(e={de:i.de,filterUrlFormat:null,pu:i.pu,puid:i.puid,pud:i.pud,r:i.r,s:i.s,sk:i.sk,t:t.vt,vc:i.vc,actkeylst:i.actkeylst,actpayload:i.actpayload,saved:i.saved});r={ma:!!(t.bv&2),at:!!(t.bv&4),capt:e,cc:t.cc,cid:t.cid,ct:t.ct,du:t.du,md5:t.md5,mid:t.mid,mmsturl:t.mmsturl,paid:!!(t.bv&1),purl:t.purl,smturl:t.smturl,thid:t.thid,vt:t.vt,bci:t.bci,murl:t.murl,sab:!!(t.bv&8),pgurl:t.pgurl,q:t.q,el:!!(t.bv&16),reid:t.reid,ifsrc:t.ifsrc}}catch(s){r=null}return r}function sr(n){var t=sj_et(n);w=t;sb_st(function(){w=null},500)}function hr(n){var t=sj_et(n);w!=t&&(g(t,VRHEnums.TriggerType.MouseTrigger),k=!0)}function cr(n){var t=sj_et(n);w!=t&&(g(t,VRHEnums.TriggerType.HoverLoopPlayTrigger),k=!0)}function g(n,t){var l=ht(n),r,a,u,s,p,w,h,k;if(!l){i&&v();return}if((r=lt(l),r&&r.cid)&&(a=er(n,r.cid),a!==i)&&(f(a,y)||(i=a),u=parseInt(o(l,"ht")),u||(u=0),!(u>=0)||!(u<c.length)||c[u]!==!1)&&(s=fr(n,r.cid),s)){var b=e(n,r.cid,VRHEnums.HoverTargetType.PlayerBoundary),tt=e(n,r.cid,VRHEnums.HoverTargetType.MMSTBoundary),it=e(n,r.cid,VRHEnums.HoverTargetType.CaptionSource),rt=e(n,r.cid,VRHEnums.HoverTargetType.CaptionTarget),et=e(n,r.cid,VRHEnums.HoverTargetType.LinkTarget),ot=e(n,r.cid,VRHEnums.HoverTargetType.ScaleCanvas),st=e(n,r.cid,VRHEnums.HoverTargetType.DuplicateSource),ct=e(n,r.cid,VRHEnums.HoverTargetType.DuplicateTarget),d=null;if(b!=null&&(p=b.getElementsByClassName(li),p&&p.length>0&&(w=p[0].getElementsByTagName("img"),w&&w.length>0&&(d=w[0]))),h=s.getElementsByTagName("img"),h&&h.length>0){var at=h[0].clientHeight,vt=h[0].clientWidth,g=s.clientWidth,nt=s.clientHeight;r.capt&&r.capt.sk&&(r.capt.sk=ar(s));k={containerId:r.cid,containerHeight:nt,containerWidth:g,hoverType:u,thumbnailHeight:Math.min(nt,at),thumbnailWidth:Math.min(g,vt),videoRichHoverMetaData:r,instMetaData:null,hoveredElement:s,triggerType:t,playerTargetEl:b,mmstTargetEl:tt,captionSourceEl:it,captionTargetEl:rt,linkTargetEl:et,playerThumbnailEl:d,scaledCanvasEl:ot,duplicateSourceEl:st,duplicateTargetEl:ct};ft&&(ut=ft(l,u,r.cid),k.instMetaData=ut);sj_evt.fire(bt,k,s,lr(r))}}}function lr(n){if(!n)return null;var t=VRHEnums.ThumbnailType.ST;return n.mmsturl&&n.smturl&&n.cc>0?t=VRHEnums.ThumbnailType.MMMT:n.smturl&&(t=VRHEnums.ThumbnailType.MT),t}function ar(n){var t,u,f,e,i,r;if(!n)return null;if(t=a("rms_img",n),u=[],t&&t.length>0){for(f=0;f<t.length;f++)if(e=dt(t[f]),i=e.split(" "),i)for(r=0;r<i.length;r++)i[r].match("rms_rmsanswers")&&u.push(i[r]);if(u.length>0)return u.join(" ")}return null}function fi(){i!==null&&(i=null,ut=null)}function ei(n){if(i&&!f(i,it)){var t=oi(sj_mo(n));t!==oi(i)&&i&&v()}}function oi(n){var f,o,t,u;return typeof r==h||!r?null:((ui(n)||or(n))&&(n=i),f=ht(n),o=null,f&&(t=lt(f),t&&(u=r[t.cid],typeof u!=h&&u&&(o=e(n,t.cid,u.hmot)))),o)}function v(){i&&f(i,y)||(d&&kr(),sj_evt.fire(t.HoverCancelEvt),fi())}function vr(n){n&&n.length>1?ei(n[1]):i&&v()}function yr(n,t,i){for(var s="h",h="data-h",r,u,e,c;n!=null;){if((f(n,s)||f(n,h))&&(r=o(n,s)||o(n,h),r&&(u=r.match(/ID=[\w]+(\.[\w]+)*(\.[\d]+_[\d]+)*,[\d]+\.[\d]+/),u)))return e=u[0].substr(3).split(","),c={AppNS:e[0],K:e[1],HoverType:t,HoverContainerId:i},c;n=n.parentNode&&n.parentNode!=n?n.parentNode:null}return null}function pr(n){if(n&&!(n.length<2)){var t=parseInt(n[1]);t<c.length&&t>=0&&(c[t]=!0)}}function wr(n){if(n&&!(n.length<2)){var t=parseInt(n[1]);t<c.length&&t>=0&&(c[t]=!1)}}function br(){hi(!0)}function si(){hi(!1)}function hi(n){if(!k&&!d){d=!0;sj_evt.unbind(t.AutoPlayNext,si);var i=wi(n);g(i,VRHEnums.TriggerType.AutoplayTrigger);sj_evt.bind(t.AutoPlayNext,si)}}function kr(){i!==null&&i.setAttribute(vt,null);d=!1}function dr(){u&&u.gebc&&u.ha&&u.ga&&u.hc&&u.gaebc&&ci&&t&&nt&&nt.bind&&(f=u.ha,a=u.gebc,o=u.ga,l=u.hc,dt=u.gcn,gt=u.gaebc,b=u.gfbc,s=nt.bind,pt=t.HoverDisableEvt,yt=t.HoverEnableEvt,bt=t.HoverMouseInEvt,wt=t.HoverStopEvt,ft=yr,kt=t.HoverAsyncBindEvt,i=null,sj_evt.bind(t.PlayerEndEvt,v),sj_evt.bind(t.HoverCleanupEvt,fi),sj_evt.bind(wt,vr),sj_evt.bind(yt,pr),sj_evt.bind(pt,wr),ni=!0)}var h="undefined",u=typeof pMMUtils!=h?pMMUtils:null,ci=typeof VideoRichHoverUtils!=h?VideoRichHoverUtils:null,nt=typeof SmartEvent!=h?SmartEvent:null,t=typeof VRHConsts!=h?VRHConsts:null,at="tchatt",tt="vrhatt",it="hapatt",y="bpatt",vt="apEnd",p="vrhm",rt="vrhc",li="cico",i=null,w=null,ut=null,yt=null,pt=null,wt=null,bt=null,kt=null,c=[!0,!0],f=null,o=null,a=null,l=null,dt=null,s=null,b=null,gt=null,ft,ni=!1,r={},ti=!1,k=!1,d=!1;n.init=ai;dr()})(VideoRichHoverHandler||(VideoRichHoverHandler={})),function(n){function ir(){u&&i&&lt&&gt&&!ni&&(ot=gt.bind,it=u.ga,ti=u.ha,a=u.sa,at=u.gcn,tr=u.sc,k=u.hc,ii=u.sp,vt=u.goh,rt=u.gow,ri=u.go,b=u.gfbc,ui=u.gaebc,oi=u.sw,si=u.sl,v=u.ac,c=u.rc,fi=lt.showElement,ei=lt.getOffsetWithScroll,ur(),ni=!0,sj_evt.fire(i.HoverReadyEvt))}function rr(n,t){!n||!t||t.length<1||!n.bindInfos||n.bindInfos.length<1||(g[t]||(g[t]=n),(n.enhoverhb||n.enmmstinst||n.enperfinst)&&typeof VideoRichHoverInst!="undefined"&&VideoRichHoverInst&&VideoRichHoverInst.init&&VideoRichHoverInst.init(t,n),typeof VideoRichHoverHandler!=f&&VideoRichHoverHandler.init&&VideoRichHoverHandler.init(t,n.isAsyncBind,n,n.bh))}function ur(){sj_evt.bind(i.HoverMouseInEvt,pr);sj_evt.bind(i.PlayerLoadEvt,fr);sj_evt.bind(i.PlayerStartEvt,er);sj_evt.bind(i.PlayerEndEvt,ci);sj_evt.bind(i.PlayerErrEvt,ci);sj_evt.bind(i.HoverCancelEvt,ar);sj_evt.bind(i.HoverMMSTShowEvt,tu);sj_evt.bind(i.HoverMMSTHideEvt,yi)}function hi(n){return n&&n.length>2&&n[2]===pt}function fr(){}function er(n){hi(n)&&sj_evt.fire(i.CaptionHideEvt,n[1])}function ci(n){hi(n)&&(et(),ht&&(ht=null,vi()))}function or(n,t){for(var i=n;i;){if(i.offsetParent===t)return t;i=i.offsetParent}return t?t.offsetParent:null}function li(n){var t,i;if(n)for(t=0;t<n.length;t++)if(n[t]&&n[t].id&&(i=_ge(n[t].id),i))return i;return null}function sr(n){var p,c,ni,u,ut,ii,ri,nt,ui,et,ot;if(n&&(p=n.containerId,c=g[p],c)&&(c.chflturl&&n&&n.videoRichHoverMetaData&&n.videoRichHoverMetaData.capt&&(n.videoRichHoverMetaData.capt.filterUrlFormat=c.chflturl),c.tw&&(n.containerWidth=n.thumbnailWidth=c.tw),c.th&&(n.containerHeight=n.thumbnailHeight=c.th),h=_ge(p),h&&h.attributes)){var tt=c.isInline,k=tt?n.containerWidth:n.thumbnailWidth,fi=tt?n.containerHeight:n.thumbnailHeight;s=n.playerTargetEl;var rt=n.mmstTargetEl,w=n.captionTargetEl,ht=s!=null?s.clientWidth:k,ei=s!=null?s.clientHeight:n.thumbnailHeight,ct=rt!=null?rt.clientWidth:k,lt=w!=null?w.clientWidth:k,oi=at(h),vt=oi.replace(" hide",""),gt=hr(n.hoveredElement,c),st=cr(gt);if((r=sj_ce("div",null,vt),r)&&(ni=["class","data-tag","data-priority"],ni.forEach(function(n){return ti(h,n)?a(r,n,it(h,n)):null}),st?(r.appendChild(st),st.innerHTML=h.innerHTML):r.innerHTML=h.innerHTML,d=n.instMetaData,u=n.videoRichHoverMetaData,ut=0,typeof CaptionContainer!=f&&CaptionContainer.init&&CaptionContainer.init(p,r,lt,!0,u.capt,n.instMetaData,n.hoveredElement),ii={containerWidth:ct,thumbCnt:u.cc,mmstUrl:u.mmsturl,isAdultThumb:u.at},typeof MultiMotionStaticThumbnail!=f&&MultiMotionStaticThumbnail.init&&(MultiMotionStaticThumbnail.init(p,r,ii,c,n.instMetaData),ut=MultiMotionStaticThumbnail.clientHeight(p)),ri={videoUrl:u.purl,mediaUrl:u.murl,thid:u.thid,smtThumbUrl:u.smturl,videoHash:u.md5,thumbnailHeight:ei,thumbnailWidth:ht,isMediaAdult:u.ma,isAdultThumb:u.at,isDebug:!0,isPaidContent:u.paid,expandable:!0,playClipsCount:g[p].mmstcnt,clipsCount:u.cc,clipsTimeline:yr(u.ct,u.cc),updatePlayProgress:!0,imageThumbUrl:null,videoTitle:u.vt,cookiePre:c.cookiePre,beginClipIndex:u.bci>0?u.bci:0,endClipIndex:c.pcc>0&&u.bci>0?u.bci+c.pcc-1:0,mediaId:u.mid,isSaveable:u.sab,pageoUrl:u.pgurl,query:u.q,enableLoop:u.el,playerEndAction:c.pea},typeof ThumbnailPlayer!=f&&ThumbnailPlayer.init&&(ThumbnailPlayer.init(p,k,n.hoverType,c,r,pt,ri,n.instMetaData),ut+=ThumbnailPlayer.clientHeight(p)),typeof IframeContainer!=f&&IframeContainer.init&&IframeContainer.init(p,r,u.ifsrc,y.stf,gt,d),nt=null,tt?(nt=t,ui=w!=null?w.clientHeight:Math.max(0,fi-ut),sj_evt.fire(i.HoverCaptionHUpdateEvt,ui)):(et=li(y.boundaryElIds),et||(et=_d.body),nt=et),nt)){if(s&&(e=b(wt,r),e&&(v(e,"outer_pc"),ft(s,e,wt,ht),sj_evt.fire(i.OverlaySizeUpdateEvt,k,n.thumbnailHeight))),rt&&(o=b(bt,r),o&&ft(rt,o,bt,ct)),w&&(n.captionSourceEl!=null?c.isCaptionReplaced?w.innerHTML=n.captionSourceEl.innerHTML:(ot=sj_ce("div",null,dt),ot.innerHTML=n.captionSourceEl.innerHTML,ft(w,ot,dt,0),ai(ot)):(l=b(kt,r),l&&ft(w,l,kt,lt))),ft(nt,r,vt,k),wr(n.duplicateSourceEl,n.duplicateTargetEl),gr(),sj_evt.fire(i.HoverVisible,t,!0),!tt&&!ou(t,r,c)){sj_evt.fire(i.HoverCancelEvt);return}yt(r,c.ic>0);yt(e,c.ic>0);yt(o,c.ic>0)}}}function ft(n,t,i,r){var u=n.firstChild;u&&k(u,i)&&u.parentNode==n&&(n.removeChild(u),u=n.firstElementChild);n.insertBefore(t,u);r>0&&oi(t,r);fi(t,!0)}function yt(n,t){n!=null&&(sj_evt.fire("focusChange",n),ot(n,"mouseout",dr),t&&ot(n,"click",iu),ut.triggerType==VRHEnums.TriggerType.TabTrigger&&ot(n,"focusout",lr))}function hr(n,t){var u,f,e,i,r;if(!t||!n||!t.bindInfos||t.bindInfos.length<1)return null;for(u=0;u<t.bindInfos.length;u++)if(f=t.bindInfos[u],k(n,f.target.bcn)&&(e=f.target.tacn,i=pi(n),i&&i.length>0))for(r=0;r<i.length;r++)if(k(i[r],e))return i[r];return null}function cr(n){var t,i,r;return n&&n.href?(t=sj_ce("a",null,"hover-anchor"),t.href=n.href,n.target&&(t.target=n.target),i=it(n,"h"),i&&a(t,"h",i),r=it(n,"aria-label"),r&&a(t,"aria-label",r),t):null}function lr(n){n&&_d&&_d.activeElement&&sb_st(function(){var n=_d.activeElement;if(!ct(n)){sj_evt.fire(i.HoverStopEvt);return}},10)}function ar(){st===!0?nt||(nt=function(){sj_evt.fire(VRHConsts.StopPlayEvt,d);et();sj_evt.fire(VRHConsts.HoverCleanupEvt)}):(sj_evt.fire(VRHConsts.StopPlayEvt,d),et());sj_evt.fire(VRHConsts.HoverCleanupEvt)}function vr(n){while(n){if(n.tagName=="a"||n.tagName=="A")return!0;n=n.parentNode&&n.parentNode!=n?n.parentNode:null}return!1}function yr(n,t){if(typeof n!=f&&typeof t!=f&&typeof enableMockImages!==f&&enableMockImages()){var r=n.split(","),i=gi.split(",");return i.length=Math.min(r.length,t),i.join(",")}return n}function pr(n){var f,r,u;if(n&&n.length>2){if(f=n[2],r=n[1],!r||!r.containerHeight||!r.containerWidth||!r.videoRichHoverMetaData)return;if(st===!0){sj_evt.fire(VRHConsts.HoverCleanupEvt);return}if(f&&f!==t)kr(r),t==null||t.hasAttribute(di)||et(),t=f,ut=r,w=r.scaledCanvasEl;else return;if(u=g[r.containerId],!u)return;y=u;st=!0;nt=null;ht=null;tt!=null&&t.hasAttribute(i.BoundarySizePersistedAttachedStr)&&t!=tt&&(c(tt,p),tt=null,w&&c(w,p));t.hasAttribute(i.BoundarySizeScaleAttachedStr)&&(v(t,p),w&&v(w,p));sb_st(function(){sj_evt.fire(i.HoverStartEvt,r.instMetaData,r.triggerType);_w!==_w.parent&&MMMessenger.Post(_w.parent,VRHEnums.IframeMessage.PreviewStarted,null);sr(r);nt&&(nt(),nt=null);st=!1;r.triggerType==VRHEnums.TriggerType.AutoplayTrigger&&u.enAutoPlayNext&&(ht=vi)},u.hoverdelayms);br(r)}}function wr(n,t){var i,u,f;if(n!=null&&t!=null){var o=at(n),e=o.split(" "),r=t;for(i=0;i<e.length;i++)if(u=b(e[i],t),u){r=u;break}r.innerHTML=n.innerHTML;f=b(ki,r);f&&ai(f)}}function br(n){var i=n.videoRichHoverMetaData,t;i!=null&&(t=n.linkTargetEl,t!=null&&(a(t,"href",i.purl),a(t,"aria-label",i.vt)))}function ai(n){if(t&&t.parentElement&&t.hasAttribute(i.BoundarySizeScaleAttachedStr)){var o=t.parentElement,u=ri(t)[0],f=rt(t),s=rt(o),e=ui("scrollbar",t),r=e!=null?u-e.scrollLeft:u;r<s-r-f&&si(n,r+f+nr)}}function kr(n){var e=n.containerId,u=g[e],t,r,i;if(u!=null&&(t=n.videoRichHoverMetaData,t!=null)&&(r=n.playerThumbnailEl,i=n.playerTargetEl,r!=null&&i!=null)){var o=t.thid,s=t.at,h=i.clientWidth,c=i.clientHeight,l=u.pid,f=ThUrlGenerator.NewThumbnailUrl(o,s,h,c,l,ThUrlGenerator.CroppingType.SmartRatio,ThUrlGenerator.ResizeMode.Ratio);f!=null&&a(r,"src",f)}}function vi(){sj_evt.fire(i.AutoPlayNext)}function dr(n){ct(sj_mo(n))||sj_evt.fire(i.HoverStopEvt,n)}function gr(){t&&v(t,"onhov");s&&v(s,"onhov")}function nu(){t&&(c(t,"onhov"),t.hasAttribute(i.BoundarySizePersistedAttachedStr)?tt=t:t.hasAttribute(i.BoundarySizeScaleAttachedStr)&&(c(t,p),c(w,p)));s&&c(s,"onhov")}function tu(){t&&v(t,"mmsts")}function yi(){t&&c(t,"mmsts")}function iu(n){var o=sj_et(n),s,u,r,e;if(ct(o)&&!vr(o)&&t&&wi()&&ut&&((new Image).src=_G.gpUrl+"IG="+_G.IG+"&"+it(t,"h"),s=ut.hoverType,u=!1,s===VRHEnums.HoveredElementType.Adult?(typeof AnsSSDlg!=f&&typeof AnsSSDlg.sw=="function"&&AnsSSDlg.sw(n,"vdo_ans_ss_dlg"),u=!0):n.ctrlKey||n.button==1||(r=uu(ru(t,y?y.bindInfos:null)),r&&(e=document.createEvent("MouseEvents"),e.initMouseEvent("click",!0,!0,_w,0,0,0,0,0,n.ctrlKey,n.altKey,n.shiftKey,n.metaKey,n.button,r),r.dispatchEvent(e),typeof si_ct=="function"&&si_ct(r)),u=!0),sj_evt.fire(i.HoverDisableEvt,VRHEnums.HoveredElementType.Algo),et(),u)){sj_pd(n);sj_sp(n);return}}function ru(n,t){var r;if(n&&t)for(r=0;r<t.length;r++){for(var u=t[r],f=u.target,i=n;i&&!k(i,f.bcn);)i=i.parentElement;if(i)return i}return null}function pi(n){return n?n.getElementsByTagName("a"):null}function uu(n){var i=pi(n),t;if(i)for(t=0;t<i.length;t++)if(!ct(i[t]))return i[t];return n}function ct(n){while(n!=null){if(k(n,bi))return!0;n=n.parentNode&&n.parentNode!=n?n.parentNode:null}return!1}function wi(){return r!=null||e!=null||o!=null}function et(){yi();nu();wi()&&(fu()&&sj_evt.fire(i.HoverVisible,t,!1),eu(),sj_evt.fire(VRHConsts.HoverMouseOutEvt,d));d=null;t=null;ut=null}function fu(){var n=null;return r!=null&&r.parentElement!=null&&(n=r.parentElement,n.removeChild(r)),e!=null&&e.parentElement!=null&&(n=e.parentElement,n.removeChild(e)),o!=null&&o.parentElement!=null&&(n=o.parentElement,n.removeChild(o)),l!=null&&l.parentElement!=null&&(n=l.parentElement,n.removeChild(l)),n!=null}function eu(){r!=null&&(r.innerHTML=null,r=null);e!=null&&(e.innerHTML=null,e=null);o!=null&&(o.innerHTML=null,o=null)}function ou(n,t,i){var r=su(t,n,i);return r?(ii(t,r.l,r.t),!0):!1}function su(n,t,i){var e,h,c;if(!i||!n||!t||(e=or(t,li(y.boundaryElIds)),!e))return null;var f=hu(e,i),l=ei(t,e,y.sd),r=l[0],u=l[1],o=rt(t),s=vt(t);if(f.l>r+o/2||f.t>u+s/2||f.r<r+o/2||f.b<u+s/2)return null;h=rt(n);c=vt(n);r-=(h-o)/2;r=Math.ceil(r);r=Math.min(r,f.r-h-2);r=Math.max(r,f.l);switch(i.va){case VRHEnums.HoverVerticalAlignType.Top:break;case VRHEnums.HoverVerticalAlignType.Middle:default:u-=(c-s)/2}return u=Math.floor(u),u=Math.min(u,f.b-c-2),u=Math.max(u,f.t),{l:r,t:u}}function hu(n){var t=n?0:sb_de.scrollLeft,i=n?0:sb_de.scrollTop,r=n.clientWidth,u=n.clientHeight;return{l:t,t:i,r:r,b:u}}var pt="VRTP",bi="vrhc",wt="vrhtpc",bt="vhcic",kt="vrhcs",dt="vrhcac",ki="mc_vtvc_meta_w",di="bpatt",p="scale",f="undefined",gi="0.000,60.000,120.000,180.000",nr=16,u=typeof pMMUtils!=f?pMMUtils:null,gt=typeof SmartEvent!=f?SmartEvent:null,lt=typeof VideoRichHoverUtils!=f?VideoRichHoverUtils:null,i=typeof VRHConsts!=f?VRHConsts:null,h=null,r=null,t=null,e=null,o=null,l=null,s=null,tt=null,w=null,ni=!1,ot=null,tr=null,it=null,ti=null,a=null,at=null,ii=null,rt=null,vt=null,ri=null,b=null,ui=null,k=null,fi=null,ei=null,oi=null,si=null,st=!1,v=null,c=null,y=null,ut,d=null,g={},nt,ht=null;n.init=rr;ir()}(VideoRichHover||(VideoRichHover={}))
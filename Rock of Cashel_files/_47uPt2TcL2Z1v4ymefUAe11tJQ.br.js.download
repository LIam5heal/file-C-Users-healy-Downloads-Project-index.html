var VideoRichHoverInst;(function(n){function l(n,i){f&&o&&t&&n&&f.bind&&o.icd&&!(n.length<1)&&(c=f.bind,e[n]&&(e[n]=null),e[n]=new h(i.enperfinst,i.enhoverhb,i.enmmstinst,i.chflturl&&i.chflturl.length>0,i.enmuteinst,i.hoverdelayms,i.instName,n))}function i(n,t){return Math.max(t-n,0)}function a(n,t,i){var r={T:"CI.RichHover.Summary",AppNS:n,K:t,TS:null,DU:null,THLT:null,RCLT:null,MOS:null,MOT:null,IsMT:0,VPST:null,VDT:null,MaxVPT:null,SCNT:0,MMSTLT:null,IsMMT:null,MuteCNT:0,Mute:null,IFLT:null,IFSCT:null};(i===VRHEnums.ThumbnailType.MT||i===VRHEnums.ThumbnailType.MMMT)&&(r.IsMMT=0,r.VPST=null,r.VDT=null,r.MaxVPT=null);switch(i){case VRHEnums.ThumbnailType.MT:r.IsMT=1;break;case VRHEnums.ThumbnailType.MMMT:r.IsMMT=1;r.IsMT=1;r.SCNT=0;r.MMSTLT=null}return r}function r(n,t,i,r){return{T:"CI.Hover",AppNS:n,K:t,Name:i,TS:sb_gt(),HType:r}}function v(n,t,i,r,u,f){return{T:"CI.RichHover_Channel",AppNS:n,K:t,Name:i,TS:sb_gt(),PubUser:r,PubId:u,EventType:f}}function y(n,t,i,r){return{T:"CI.RichHover_MMSTHover",AppNS:n,K:t,Name:r,TS:sb_gt(),EN:"mmst_hover",Index:i}}function p(n,t){n!==null&&s&&s.RegisterEventFunc("Hover",n.reid,n.murl,{HoverTime:t})}var u="undefined",o=typeof pInstr!=u?pInstr:null,f=typeof SmartEvent!=u?SmartEvent:null,t=typeof VRHConsts!=u?VRHConsts:null,c,e=[],s=typeof OpalRecoInst!=u?OpalRecoInst:null,h;n.init=l;h=function(){function n(n,u,f,e,o,s,h,c){var l=this;this.hoverDelayTime=0;this.enablePerf=!1;this.enableHover=!1;this.enableMMSTHover=!1;this.bindEvents=function(){sj_evt.bind(t.HoverMouseInEvt,l.mouseIn);sj_evt.bind(t.HoverMouseOutEvt,l.mouseOut);l.enablePerf&&(sj_evt.bind(t.HoverCaptionLoadEvt,l.richCaptionLoaded),sj_evt.bind(t.HoverMMSTLoadEvt,l.mmstLoaded),sj_evt.bind(t.PlayerDownloadEndEvt,l.videoDownloaded),sj_evt.bind(t.PlayerEndEvt,l.videoEnd),sj_evt.bind(t.PlayerStartEvt,l.videoStart),sj_evt.bind(t.HoverThumbLoadEvt,l.thumbnailLoaded),sj_evt.bind(t.IframeLoadedEvt,l.iframeLoaded),sj_evt.bind(t.IframeScrollEvt,l.iframeScroll));l.enableHover&&sj_evt.bind(t.HoverStartEvt,l.hoverStart);l.enableMMSTHover&&sj_evt.bind(t.MMSTSeekEvt,l.seek);l.enableChannelFilter&&sj_evt.bind(t.HoverChannelFilterEvt,l.channelEvent);l.enableMuteInst&&sj_evt.bind(t.HoverMuteEvt,l.muteClick)};this.isCallMe=function(n){return n&&n.length>1&&n[1]&&n[1].AppNS&&n[1].K&&n[1].HoverContainerId&&l.nameSpace===n[1].AppNS&&l.kValue===n[1].K&&l.containerName===n[1].HoverContainerId?!0:!1};this.getTriggerType=function(n){return n&&n.length>2&&n[2]&&!isNaN(n[2])?parseInt(n[2]):-1};this.mouseIn=function(n){var r,u,f,e,o,s,h,c,t;!n&&n.length<4||(t=[],t.push(n[0]),t.push((r=n[1])===null||r===void 0?void 0:r.instMetaData),l.isCallMe(t))||(l.nameSpace=(f=(u=n[1])===null||u===void 0?void 0:u.instMetaData)===null||f===void 0?void 0:f.AppNS,l.kValue=(o=(e=n[1])===null||e===void 0?void 0:e.instMetaData)===null||o===void 0?void 0:o.K,l.hoverType=(h=(s=n[1])===null||s===void 0?void 0:s.instMetaData)===null||h===void 0?void 0:h.HoverType,l.videoRichHoverMetaData=(c=n[1])===null||c===void 0?void 0:c.videoRichHoverMetaData,l.thumbnailType=n[3],(l.enablePerf||l.enableMMSTHover||l.enableMuteInst)&&(l.perfInst=a(l.nameSpace,l.kValue,l.thumbnailType),l.perfInst.MOS=i(_G.ST,sb_gt()),l.mouseInStartTime=sb_gt()))};this.mouseOut=function(n){l.isCallMe(n)&&(l.enablePerf&&l.perfInst&&(l.perfInst.TS=sb_gt(),l.perfInst.MOT=i(l.mouseInStartTime,l.perfInst.TS),l.perfInst.DU=Math.max(l.perfInst.MOT,l.perfInst.MMSTLT,l.perfInst.THLT,l.perfInst.RCLT),l.perfInst.MaxVPT||(l.perfInst.MaxVPT=l.perfInst.MOT),l.perfInst.MOS>0&&l.perfInst.MOT>l.hoverDelayTime+100&&mmLog(JSON.stringify(l.perfInst)),l.perfInst=null),l.nameSpace=null,l.kValue=null,l.hoverType=null,l.hoverStartTime=null,l.mouseInStartTime=null,l.videoStartTime=null,l.perfInst=null,l.videoRichHoverMetaData=null);l.hoverStop=!0;l.unbindHoverHeartBeatEvents()};this.hoverStart=function(n){var t,i,u,f;if(l.isCallMe(n)&&(l.hoverStop=!1,l.hoverStartTime=sb_gt(),l.enableHover)){t=r(l.nameSpace,l.kValue,l.instName,"h");mmLog(JSON.stringify(t));i=l.getTriggerType(n);switch(i){case VRHEnums.TriggerType.AutoplayTrigger:u=r(l.nameSpace,l.kValue,l.instName,"a");mmLog(JSON.stringify(u));break;case VRHEnums.TriggerType.HoverLoopPlayTrigger:f=r(l.nameSpace,l.kValue,l.instName,"l");mmLog(JSON.stringify(f));break;default:l.bindHoverHeartBeatEvents(n)}}};this.channelEvent=function(n){l.isCallMe(n)!==!1&&(n.length<5&&n[2]&&n[2].length>0&&n[3]&&n[3].length>0&&n[4]&&n[4].length>0||mmLog(JSON.stringify(v(l.nameSpace,l.kValue,l.instName,n[3],n[4],n[5]))))};this.unbindHoverHeartBeatEvents=function(){l.hoverInst2&&sb_ct(l.hoverInst2);l.hoverInst5&&sb_ct(l.hoverInst5);l.hoverInst10&&sb_ct(l.hoverInst10);l.hoverInst2=l.hoverInst5=l.hoverInst10=null};this.videoStart=function(n){l.isCallMe(n)&&!l.videoStartTime&&(l.videoStartTime=sb_gt(),l.perfInst.VPST=i(l.mouseInStartTime,l.videoStartTime))};this.videoEnd=function(n){l.isCallMe(n)&&!l.perfInst.MaxVPT&&(l.perfInst.MaxVPT=i(l.videoStartTime,sb_gt()))};this.muteClick=function(n){l.isCallMe(n)&&l.perfInst&&(l.perfInst.MuteCNT++,n.length>2&&(l.perfInst.Mute=n[2]===!0?1:0))};this.seek=function(n){if(l.isCallMe(n)&&(l.perfInst&&l.perfInst.SCNT++,l.enableMMSTHover)){if(!n||n.length<3)return;var t=parseInt(n[2]);if(!l.nameSpace||!l.kValue||isNaN(t))return;mmLog(JSON.stringify(y(l.nameSpace,l.kValue,t,l.instName)))}};this.videoDownloaded=function(n){l.isCallMe(n)&&l.perfInst&&!l.perfInst.VDT&&(l.perfInst.VDT=i(l.mouseInStartTime,sb_gt()),l.enableMuteInst&&n.length>3&&(l.perfInst.Mute=n[3]===!0?1:0))};this.thumbnailLoaded=function(n){l.isCallMe(n)&&l.perfInst&&!l.perfInst.THLT&&(l.perfInst.THLT=i(l.mouseInStartTime,sb_gt()))};this.mmstLoaded=function(n){l.isCallMe(n)&&l.perfInst&&!l.perfInst.MMSTLT&&(l.perfInst.MMSTLT=i(l.mouseInStartTime,sb_gt()))};this.richCaptionLoaded=function(n){l.isCallMe(n)&&l.perfInst&&!l.perfInst.RCLT&&(l.perfInst.RCLT=i(l.mouseInStartTime,sb_gt()))};this.iframeLoaded=function(n){if(l.isCallMe(n)&&n.length>2&&l.perfInst&&!l.perfInst.IFLT){var t=n[2];l.perfInst.IFLT=i(l.mouseInStartTime,sb_gt());t||(l.perfInst.IFLT=-l.perfInst.IFLT)}};this.iframeScroll=function(n){l.isCallMe(n)&&l.perfInst&&!l.perfInst.IFSCT&&(l.perfInst.IFSCT=i(l.mouseInStartTime+l.perfInst.IFLT,sb_gt()))};s>0&&(this.hoverDelayTime=s);this.enablePerf=n;this.enableHover=u;this.enableMMSTHover=f;this.enableChannelFilter=e;this.enableMuteInst=o;this.instName=h;this.containerName=c;this.bindEvents()}return n.prototype.bindHoverHeartBeatEvents=function(){var n=this;this.hoverInst2=sb_st(function(){n.hoverStop||(n.hoverInst2=null,mmLog(JSON.stringify(r(n.nameSpace,n.kValue,n.instName,"d2"))))},2e3);this.hoverInst5=sb_st(function(){n.hoverStop||(n.hoverInst5=null,mmLog(JSON.stringify(r(n.nameSpace,n.kValue,n.instName,"d5"))),p(n.videoRichHoverMetaData,5e3))},5e3);this.hoverInst10=sb_st(function(){n.hoverStop||(n.hoverInst10=null,mmLog(JSON.stringify(r(n.nameSpace,n.kValue,n.instName,"d10"))))},1e4)},n}()})(VideoRichHoverInst||(VideoRichHoverInst={}))
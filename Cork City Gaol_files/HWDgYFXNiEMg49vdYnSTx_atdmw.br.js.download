var VideoRichHoverHandler,VideoRichHover;(function(n){function fr(n,t){ai&&(!t||!t.bindInfos||t.bindInfos.length<1||(u[n]=t,t.isAsyncBind&&sj_evt.bind(si,er),vi=t.bh,c=t.enHoverAsyncMeta,wt(t)))}function er(n){var t,i;if(n)if(t=null,n.length>1&&(t=n[1]),!t||t.length<1)for(i in u)wt(u[i]?u[i]:null);else wt(u[t]?u[t]:null)}function wt(n){var l,f,r,e,o,s,t,a,u,i;if(n!=null&&(l=n.bindInfos,f=pi(l,n.useClassAsTargetInfoKey),f!=null&&!(f.length<1))){for(i=0;i<f.length;i++)if(r=f[i],r!==null&&r.elements!==null&&r.targetInfo!==null)for(e=r.targetInfo,o=0;o<r.elements.length;o++)if((s=r.elements[o],t=kt(s,e),t)&&(a=sr(n),!hr(t)))switch(a){case VRHEnums.HoverPlayType.BackgroundPlay:t.setAttribute(d,null);break;case VRHEnums.HoverPlayType.HoverLoopPlay:t.setAttribute(ot,null);h(t,"mousemove",fu,!1,!1);yi(t,s,n,e);break;case VRHEnums.HoverPlayType.HoverPlay:t.setAttribute(et,null);h(t,"mousemove",uu,!1,!1);yi(t,s,n,e);break;case VRHEnums.HoverPlayType.Null:t.setAttribute(et,null)}if(c&&(u=vr(l,n.useClassAsTargetInfoKey),u&&u.length>0))for(i=0;i<u.length;i++)u[i]&&h(u[i],"mousemove",ru,!1,!1);h(_w,"focus",pr,!0);vi||h(_w,"blur",br,!0);n.enAutoPlayOnLoad&&sj_evt.bind("onP1",au,!0)}}function yi(n,t,r,u){if(h(n,"touchstart",iu,!1,!1),h(t,"mouseout",di,!1,!1),r.entabhover===!0){var f=lr(n,u);f&&h(f,"focus",wr,!1,!1)}r.isBoundarySizePersisted&&t.setAttribute(i.BoundarySizePersistedAttachedStr,null);r.enBoundarySizeScale&&t.setAttribute(i.BoundarySizeScaleAttachedStr,null)}function bt(n,t,i){var r,s,c,h,e,l,a;if(n&&(r=p(n),r)){if(o(r,g)&&o(r,w)){t!=null&&i&&i(n,t);return}if(s=parseInt(f(r,ri)),isNaN(s)&&(s=1),!o(r,g)&&s>0){if(c=f(r,ht),!c)return;if(h=u[c],!h||!h.metauf)return;if(e=sj_gx(),!e)return;at(r,g);e.onreadystatechange=function(){if(4==e.readyState){var u=or(r,200==e.status?e.responseText:"");u?o(r,w)&&t!=null&&i&&i(n,t,0):(s-=1,lt(r,ri,s),vt(r,g),bt(n,t,i))}};l=f(r,"mid");a=yt(h.metauf,l);e.open("GET",a,!0);e.send(null)}}}function or(n,t){var r,i;if(!n||!t)return!1;if(r=f(n,a),!r||r!=t){i=null;try{if(i=eval("("+t+")"),!i)return!1;lt(n,a,JSON.stringify(i))}catch(u){return!1}return!0}return!1}function sr(n){var t=VRHEnums.HoverPlayType.Null;return n.enBgPlay?t=VRHEnums.HoverPlayType.BackgroundPlay:n.enHoverControl&&(t=n.enLoopPlayOnHover?VRHEnums.HoverPlayType.HoverLoopPlay:VRHEnums.HoverPlayType.HoverPlay),t}function hr(n){return n==null?!0:f(n,et)||f(n,d)||f(n,ot)}function cr(n){var t=Array(),a,r,h,o,l,f,s,v,c;for(a in u)r=u[a],r&&(n&&r.enAutoPlayOnLoad||r.enAutoPlayNext)&&(h=pi(r.bindInfos,r.useClassAsTargetInfoKey),h!=null&&h.length>0&&(t=t.concat(h)));if(t.length<1)return null;for(o=0;o<t.length;o++)if(l=t[o].targetInfo,f=t[o].elements,l!==null&&f!==null&&!(f.length<1))for(s=0;s<f.length;s++)if((v=!e(f[s],i.BoundarySizeScaleAttachedStr),c=kt(f[s],l,v),c!==null)&&!e(c,ii))return c;return null}function lr(n,t){var r,i;if(!t||!n)return null;if(o(n,t.tcn)){if(r=t.ttcn,!r||r.length<1)return null;i=n;do{if(i&&o(i,r))return i;i=i.parentElement}while(i&&i!=_d.body);return null}return null}function ar(n){var u,i,f,t,e,r;if(!n||n.length<1)return null;for(u=[],i=0;i<n.length;i++)f=n[i].id,t=n[i].target,f&&t&&t.tcn&&t.ttcn&&(e=_ge(f),e&&(r=y(t.ttcn,e),r&&r.length>0&&u.push({targetInfo:t,elements:r})));return u}function pi(n,t){var f,e,u,r,s,i,o;if(!n||n.length<1)return null;for(f=[],i=0;i<n.length;i++)if(e=n[i].id,u=n[i].target,e&&u&&u.bcn&&u.tcn&&(r=null,t?r=wi(e):(s=_ge(e),s&&(r=[],r.push(s))),r&&r.length>0))for(i=0;i<r.length;i++)o=y(u.bcn,r[i]),o&&o.length>0&&f.push({targetInfo:u,elements:o});return f.length>0?f:null}function vr(n,t){var u,f,e,r,s,i,o;if(!n||n.length<1)return null;for(u=[],i=0;i<n.length;i++)if(f=n[i].id,e=n[i].target,f&&e&&e.marc&&(r=null,t?r=wi(f):(s=_ge(f),s&&(r=[],r.push(s))),r&&r.length>0))for(i=0;i<r.length;i++)o=y(e.marc,r[i]),o&&o.length>0&&(u=u.concat.apply(u,o));return u.length>0?u:null}function wi(n){var t,r,i;if(!n)return null;if(t=y(n,_d),t){for(r=[],i=0;i<t.length;i++)e(t[i],ti)||(r.push(t[i]),t[i].setAttribute(ti,null));return r}return null}function kt(n,t,i){var u,f,r;return(i===void 0&&(i=!1),n&&t&&(u=gt(n,a),u||c))?(f=t.tcn===t.bcn?n:tt(t.tcn,n),i&&u)?(r=ni(u),!r||!r.cid)?null:r.smturl&&r.smturl!=null&&r.smturl.length>0?f:null:f:null}function yr(n){var t=Array(),c,o,f,i,s,r,e,h;for(c in u)o=u[c],o&&(f=ar(o.bindInfos),f!=null&&f.length>0&&(t=t.concat(f)));if(t.length<1)return null;for(i=0;i<t.length;i++)if(s=t[i].targetInfo,r=t[i].elements,s!==null&&r!==null&&!(r.length<1))for(e=0;e<r.length;e++)if(r[e]==n&&(h=kt(n,s,!1),h!==null))return h;return null}function dt(n){sj_evt.fire(n,VRHEnums.HoveredElementType.Adult);sj_evt.fire(n,VRHEnums.HoveredElementType.Algo)}function pr(){dt(i.HoverEnableEvt)}function wr(n){var i=sj_et(n),t=yr(i);t&&(c?ut(t,VRHEnums.TriggerType.TabTrigger):b(t,VRHEnums.TriggerType.TabTrigger),it=!0)}function br(){_d.activeElement!=null&&(_d.activeElement==sj_b||bi(_d.activeElement)?dt(i.HoverEnableEvt):(k(),dt(i.HoverDisableEvt)))}function p(n){for(var t=n,i;t!=null;){if(i=gt(t,a),i)return i;if(o(t,st))return p(r);t=t.parentNode&&t.parentNode!=t?t.parentNode:null}return null}function gt(n,t){var i,r;if(n){if(e(n,t)===!0)return n;if(n.children&&n.children.length>0)for(i=0;i<n.children.length;i++)if(r=gt(n.children[i],t),r)return r}return null}function kr(n,t,i){for(var r=n;r;){if(r.id==i)return null;if(o(r,t))return r;r=r.parentElement}return null}function dr(n,t){var i=_ge(n);return i==null?null:tt(t,i)}function gr(n,t){return s(n,t,VRHEnums.HoverTargetType.Boundary)}function nu(n,t){return s(n,t,VRHEnums.HoverTargetType.Target)}function s(n,t,i){var s,h,e;if(n&&t&&(s=u[t]?u[t].bindInfos:null,s&&s.length>0))for(h=0;h<s.length;h++){var r=s[h],f=null,o=null,c=null,l=!1;switch(i){case VRHEnums.HoverTargetType.Boundary:f=r.target.bcn;break;case VRHEnums.HoverTargetType.CaptionSource:f=r.target.bcn;c=r.target.cscn;l=!0;break;case VRHEnums.HoverTargetType.Target:f=r.target.tcn;break;case VRHEnums.HoverTargetType.PlayerBoundary:f=r.target.pbcn;o=r.target.ppid;break;case VRHEnums.HoverTargetType.MMSTBoundary:f=r.target.mbcn;o=r.target.mpid;break;case VRHEnums.HoverTargetType.CaptionTarget:f=r.target.ctcn;o=r.target.tpid;break;case VRHEnums.HoverTargetType.LinkTarget:f=r.target.ltcn;o=r.target.tpid;break;case VRHEnums.HoverTargetType.ScaleCanvas:return _ge(r.target.scid);case VRHEnums.HoverTargetType.DuplicateSource:f=r.target.dscn;break;case VRHEnums.HoverTargetType.DuplicateTarget:return _ge(r.target.dtid)}if(f&&(e=null,o!=null?e=dr(o,f):(e=kr(n,f,r.id),e&&l&&(e=c!=null?tt(c,e):null)),e))return e}return null}function bi(n){return li(st,n)!=null}function tu(n){if(n&&typeof n.getBoundingClientRect=="function"){var i=n.getBoundingClientRect(),r=i.x,u=i.y,t=[];return _d.elementsFromPoint?t=_d.elementsFromPoint(r,u):_d.msElementsFromPoint&&(t=_d.msElementsFromPoint(r,u)),(t===null||t===void 0?void 0:t.length)&&t.findIndex(function(t){return t.id!==n.id&&o(t,st)})>-1}}function ni(n){var t=null,r=null,i=null,y=null,h=null,s,o,l,v;if(e(n,a)===!0&&(h=f(n,a)),h==null)return null;try{if(t=JSON.parse(h),c){if((s=f(n,ht),!s)||(o=u[s],!o))return null;l=ci("q");v=null;o.isuf||l||r.mid||(v=yt(o.isuf,l,r.mid));r={ma:!!t.ma,at:!!t.at,capt:null,cc:t.cc,cid:s,ct:t.ct,du:t.du,md5:t.md5,mid:f(n,ht),mmsturl:t.mmsturl,paid:!!t.paid,purl:t.purl,smturl:t.smturl,thid:t.thid,vt:t.vt,bci:t.bci,murl:t.murl,sab:!!f(n,ur),pgurl:t.pgurl,q:t.q,el:o.enLoopPlay,reid:t.reid,ifsrc:v}}else r={ma:!!(t.bv&2),at:!!(t.bv&4),capt:null,cc:t.cc,cid:t.cid,ct:t.ct,du:t.du,md5:t.md5,mid:t.mid,mmsturl:t.mmsturl,paid:!!(t.bv&1),purl:t.purl,smturl:t.smturl,thid:t.thid,vt:t.vt,bci:t.bci,murl:t.murl,sab:!!(t.bv&8),pgurl:t.pgurl,q:t.q,el:!!(t.bv&16),reid:t.reid,ifsrc:t.ifsrc};i=t.capt;i&&(y={de:i.de,filterUrlFormat:null,pu:i.pu,puid:i.puid,pud:i.pud,r:i.r,s:i.s,sk:i.sk,t:t.vt,vc:i.vc,actkeylst:i.actkeylst,actpayload:i.actpayload,saved:i.saved,du:t.du},r.capt=y)}catch(p){r=null}return r}function iu(n){var t=sj_et(n);nt=t;sb_st(function(){nt=null},500)}function ru(n){var t=sj_et(n);t&&bt(t,null,null)}function uu(n){var t=sj_et(n);nt!=t&&(c?ut(t,VRHEnums.TriggerType.MouseTrigger):b(t,VRHEnums.TriggerType.MouseTrigger),it=!0)}function fu(n){var t=sj_et(n);nt!=t&&(c?ut(t,VRHEnums.TriggerType.HoverLoopPlayTrigger):b(t,VRHEnums.TriggerType.HoverLoopPlayTrigger),it=!0)}function ut(n,t){if(n){var i=p(n);i&&(at(i,w),bt(n,t,b))}}function b(n,t,i){var c,u,a,o,h,y,w,l,g;if(i===void 0&&(i=-1),c=p(n),!c){r&&k();return}if((u=ni(c),u&&u.cid)&&(a=nu(n,u.cid),a!==r)&&(e(a,d)||(r=a),o=parseInt(f(c,"ht")),o||(o=0),!(o>=0)||!(o<v.length)||v[o]!==!1)&&(h=gr(n,u.cid),h)){var b=s(n,u.cid,VRHEnums.HoverTargetType.PlayerBoundary),rt=s(n,u.cid,VRHEnums.HoverTargetType.MMSTBoundary),ut=s(n,u.cid,VRHEnums.HoverTargetType.CaptionSource),ft=s(n,u.cid,VRHEnums.HoverTargetType.CaptionTarget),et=s(n,u.cid,VRHEnums.HoverTargetType.LinkTarget),ot=s(n,u.cid,VRHEnums.HoverTargetType.ScaleCanvas),st=s(n,u.cid,VRHEnums.HoverTargetType.DuplicateSource),ht=s(n,u.cid,VRHEnums.HoverTargetType.DuplicateTarget),nt=null;if(b!=null&&(y=b.getElementsByClassName(rr),y&&y.length>0&&(w=y[0].getElementsByTagName("img"),w&&w.length>0&&(nt=w[0]))),l=h.getElementsByTagName("img"),l&&l.length>0){var lt=l[0].clientHeight,at=l[0].clientWidth,tt=h.clientWidth,it=h.clientHeight;u.capt&&u.capt.sk&&(u.capt.sk=ou(h));g={containerId:u.cid,containerHeight:it,containerWidth:tt,hoverType:o,thumbnailHeight:Math.min(it,lt),thumbnailWidth:Math.min(tt,at),videoRichHoverMetaData:u,instMetaData:null,hoveredElement:h,triggerType:t,playerTargetEl:b,mmstTargetEl:rt,captionSourceEl:ut,captionTargetEl:ft,linkTargetEl:et,playerThumbnailEl:nt,scaledCanvasEl:ot,duplicateSourceEl:st,duplicateTargetEl:ht,hoverDelayMsOverwrite:i};pt&&(ct=pt(c,o,u.cid),g.instMetaData=ct);sj_evt.fire(oi,g,h,eu(u))}}}function eu(n){if(!n)return null;var t=VRHEnums.ThumbnailType.ST;return n.mmsturl&&n.smturl&&n.cc>0?t=VRHEnums.ThumbnailType.MMMT:n.smturl&&(t=VRHEnums.ThumbnailType.MT),t}function ou(n){var t,u,f,e,i,r;if(!n)return null;if(t=y("rms_img",n),u=[],t&&t.length>0){for(f=0;f<t.length;f++)if(e=hi(t[f]),i=e.split(" "),i)for(r=0;r<i.length;r++)i[r].match("rms_rmsanswers")&&u.push(i[r]);if(u.length>0)return u.join(" ")}return null}function ki(){r!==null&&(r=null,ct=null)}function di(n){var t,i;(c&&(t=p(sj_et(n)),t&&o(t,w)&&vt(t,w)),r&&!e(r,ot))&&(i=gi(sj_mo(n)),i!==gi(r)&&r&&k())}function gi(n){var f,e,t,i;return typeof u==l||!u?null:((bi(n)||tu(n))&&(n=r),f=p(n),e=null,f&&(t=ni(f),t&&(i=u[t.cid],typeof i!=l&&i&&(e=s(n,t.cid,i.hmot)))),e)}function k(){r&&e(r,d)||(rt&&vu(),sj_evt.fire(i.HoverCancelEvt),ki())}function su(n){n&&n.length>1?di(n[1]):r&&k()}function hu(n,t,i){for(var s="h",h="data-h",r,u,o,c;n!=null;){if((e(n,s)||e(n,h))&&(r=f(n,s)||f(n,h),r&&(u=r.match(/ID=[\w]+(\.[\w]+)*(\.[\d]+_[\d]+)*,[\d]+\.[\d]+/),u)))return o=u[0].substr(3).split(","),c={AppNS:o[0],K:o[1],HoverType:t,HoverContainerId:i},c;n=n.parentNode&&n.parentNode!=n?n.parentNode:null}return null}function cu(n){if(n&&!(n.length<2)){var t=parseInt(n[1]);t<v.length&&t>=0&&(v[t]=!0)}}function lu(n){if(n&&!(n.length<2)){var t=parseInt(n[1]);t<v.length&&t>=0&&(v[t]=!1)}}function au(){tr(!0)}function nr(){tr(!1)}function tr(n){if(!it&&!rt){rt=!0;sj_evt.unbind(i.AutoPlayNext,nr);var t=cr(n);c?ut(t,VRHEnums.TriggerType.AutoplayTrigger):b(t,VRHEnums.TriggerType.AutoplayTrigger);sj_evt.bind(i.AutoPlayNext,nr)}}function vu(){r!==null&&r.setAttribute(ii,null);rt=!1}function yu(){t&&t.gebc&&t.ha&&t.ga&&t.sa&&t.hc&&t.ac&&t.rc&&t.sf&&t.gaebc&&t.qsv&&ir&&i&&ft&&ft.bind&&(e=t.ha,y=t.gebc,f=t.ga,lt=t.sa,o=t.hc,hi=t.gcn,at=t.ac,vt=t.rc,yt=t.sf,ci=t.qsv,li=t.gaebc,tt=t.gfbc,h=ft.bind,fi=i.HoverDisableEvt,ui=i.HoverEnableEvt,oi=i.HoverMouseInEvt,ei=i.HoverStopEvt,pt=hu,si=i.HoverAsyncBindEvt,r=null,sj_evt.bind(i.PlayerEndEvt,k),sj_evt.bind(i.HoverCleanupEvt,ki),sj_evt.bind(ei,su),sj_evt.bind(ui,cu),sj_evt.bind(fi,lu),ai=!0)}var l="undefined",t=typeof pMMUtils!=l?pMMUtils:null,ir=typeof VideoRichHoverUtils!=l?VideoRichHoverUtils:null,ft=typeof SmartEvent!=l?SmartEvent:null,i=typeof VRHConsts!=l?VRHConsts:null,ti="tchatt",et="vrhatt",ot="hapatt",d="bpatt",ii="apEnd",a="vrhm",st="vrhc",rr="cico",ht="hcid",ri="rt",g="retrieved",ur="sab",w="onhov",r=null,nt=null,ct=null,ui=null,fi=null,ei=null,oi=null,si=null,v=[!0,!0],e=null,f=null,lt=null,y=null,o=null,hi=null,at=null,vt=null,yt=null,ci=null,h=null,tt=null,li=null,pt,ai=!1,u={},vi=!1,it=!1,rt=!1,c=!1;n.init=fr;yu()})(VideoRichHoverHandler||(VideoRichHoverHandler={})),function(n){function ur(){u&&i&&at&&gt&&!ni&&(st=gt.bind,it=u.ga,ti=u.ha,a=u.sa,vt=u.gcn,rr=u.sc,k=u.hc,ii=u.sp,yt=u.goh,rt=u.gow,ri=u.go,b=u.gfbc,ui=u.gaebc,oi=u.sw,si=u.sl,v=u.ac,c=u.rc,hi=u.app,ci=u.isTest,fi=at.showElement,ei=at.getOffsetWithScroll,er(),ni=!0,sj_evt.fire(i.HoverReadyEvt))}function fr(n,t){!n||!t||t.length<1||!n.bindInfos||n.bindInfos.length<1||(g[t]||(g[t]=n),(n.enhoverhb||n.enmmstinst||n.enperfinst)&&typeof VideoRichHoverInst!="undefined"&&VideoRichHoverInst&&VideoRichHoverInst.init&&VideoRichHoverInst.init(t,n),typeof VideoRichHoverHandler!=f&&VideoRichHoverHandler.init&&VideoRichHoverHandler.init(t,n))}function er(){sj_evt.bind(i.HoverMouseInEvt,br);sj_evt.bind(i.PlayerLoadEvt,or);sj_evt.bind(i.PlayerStartEvt,sr);sj_evt.bind(i.PlayerEndEvt,ai);sj_evt.bind(i.PlayerErrEvt,ai);sj_evt.bind(i.HoverCancelEvt,yr);sj_evt.bind(i.HoverMMSTShowEvt,ru);sj_evt.bind(i.HoverMMSTHideEvt,wi)}function li(n){return n&&n.length>2&&n[2]===ot}function or(){}function sr(n){li(n)&&sj_evt.fire(i.CaptionHideEvt,n[1])}function ai(n){li(n)&&(et(),ct&&(ct=null,pi()))}function hr(n,t){for(var i=n;i;){if(i.offsetParent===t)return t;i=i.offsetParent}return t?t.offsetParent:null}function vi(n){var t,i;if(n)for(t=0;t<n.length;t++)if(n[t]&&n[t].id&&(i=_ge(n[t].id),i))return i;return null}function cr(n){var p,c,ni,u,ut,ii,ri,nt,ui,et,st;if(n&&(p=n.containerId,c=g[p],c)&&(c.chflturl&&n&&n.videoRichHoverMetaData&&n.videoRichHoverMetaData.capt&&(n.videoRichHoverMetaData.capt.filterUrlFormat=c.chflturl),c.tw&&(n.containerWidth=n.thumbnailWidth=c.tw),c.th&&(n.containerHeight=n.thumbnailHeight=c.th),h=_ge(p),h&&h.attributes)){var tt=c.isInline,k=tt?n.containerWidth:n.thumbnailWidth,fi=tt?n.containerHeight:n.thumbnailHeight;s=n.playerTargetEl;var rt=n.mmstTargetEl,w=n.captionTargetEl,ct=s!=null?s.clientWidth:k,ei=s!=null?s.clientHeight:n.thumbnailHeight,lt=rt!=null?rt.clientWidth:k,at=w!=null?w.clientWidth:k,oi=vt(h),yt=oi.replace(" hide",""),gt=lr(n.hoveredElement,c),ht=ar(gt);if((r=sj_ce("div",null,yt),r)&&(ni=["class","data-tag","data-priority"],ni.forEach(function(n){return ti(h,n)?a(r,n,it(h,n)):null}),ht?(r.appendChild(ht),ht.innerHTML=h.innerHTML):r.innerHTML=h.innerHTML,d=n.instMetaData,u=n.videoRichHoverMetaData,ut=0,typeof CaptionContainer!=f&&CaptionContainer.init&&CaptionContainer.init(p,r,at,!0,u.capt,n.instMetaData,n.hoveredElement,ot),ii={containerWidth:lt,thumbCnt:u.cc,mmstUrl:u.mmsturl,isAdultThumb:u.at},typeof MultiMotionStaticThumbnail!=f&&MultiMotionStaticThumbnail.init&&(MultiMotionStaticThumbnail.init(p,r,ii,c,n.instMetaData),ut=MultiMotionStaticThumbnail.clientHeight(p)),ri={videoUrl:u.purl,mediaUrl:u.murl,thid:u.thid,smtThumbUrl:u.smturl,videoHash:u.md5,thumbnailHeight:ei,thumbnailWidth:ct,isMediaAdult:u.ma,isAdultThumb:u.at,isDebug:!0,isPaidContent:u.paid,expandable:!0,playClipsCount:g[p].mmstcnt,clipsCount:u.cc,clipsTimeline:wr(u.ct,u.cc),updatePlayProgress:!0,imageThumbUrl:null,videoTitle:u.vt,cookiePre:c.cookiePre,beginClipIndex:u.bci>0?u.bci:0,endClipIndex:c.pcc>0&&u.bci>0?u.bci+c.pcc-1:0,mediaId:u.mid,isSaveable:u.sab,pageoUrl:u.pgurl,query:u.q,enableLoop:u.el,playerEndAction:c.pea},typeof ThumbnailPlayer!=f&&ThumbnailPlayer.init&&(ThumbnailPlayer.init(p,k,n.hoverType,c,r,ot,ri,n.instMetaData),ut+=ThumbnailPlayer.clientHeight(p)),typeof IframeContainer!=f&&IframeContainer.init&&IframeContainer.init(p,r,hi(u.ifsrc,undefined,ci()?["ajaxbag","ajaxhostname"]:undefined),y.stf,gt,ot,d),nt=null,tt?(nt=t,ui=w!=null?w.clientHeight:Math.max(0,fi-ut),sj_evt.fire(i.HoverCaptionHUpdateEvt,ui)):(et=vi(y.boundaryElIds),et||(et=_d.body),nt=et),nt)){if(s&&(e=b(wt,r),e&&(v(e,"outer_pc"),ft(s,e,wt,ct),sj_evt.fire(i.OverlaySizeUpdateEvt,k,n.thumbnailHeight))),rt&&(o=b(bt,r),o&&ft(rt,o,bt,lt)),w&&(n.captionSourceEl!=null?c.isCaptionReplaced?w.innerHTML=n.captionSourceEl.innerHTML:(st=sj_ce("div",null,dt),st.innerHTML=n.captionSourceEl.innerHTML,ft(w,st,dt,0),yi(st)):(l=b(kt,r),l&&ft(w,l,kt,at))),ft(nt,r,yt,k),kr(n.duplicateSourceEl,n.duplicateTargetEl),tu(),sj_evt.fire(i.HoverVisible,t,!0),!tt&&!hu(t,r,c)){sj_evt.fire(i.HoverCancelEvt);return}pt(r,c.ic>0);pt(e,c.ic>0);pt(o,c.ic>0)}}}function ft(n,t,i,r){var u=n.firstChild;u&&k(u,i)&&u.parentNode==n&&(n.removeChild(u),u=n.firstElementChild);n.insertBefore(t,u);r>0&&oi(t,r);fi(t,!0)}function pt(n,t){n!=null&&(sj_evt.fire("focusChange",n),st(n,"mouseout",nu),t&&st(n,"click",uu),ut.triggerType==VRHEnums.TriggerType.TabTrigger&&st(n,"focusout",vr))}function lr(n,t){var u,f,e,i,r;if(!t||!n||!t.bindInfos||t.bindInfos.length<1)return null;for(u=0;u<t.bindInfos.length;u++)if(f=t.bindInfos[u],k(n,f.target.bcn)&&(e=f.target.tacn,i=bi(n),i&&i.length>0))for(r=0;r<i.length;r++)if(k(i[r],e))return i[r];return null}function ar(n){var t,i,r;return n&&n.href?(t=sj_ce("a",null,"hover-anchor"),t.href=n.href,n.target&&(t.target=n.target),i=it(n,"h"),i&&a(t,"h",i),r=it(n,"aria-label"),r&&a(t,"aria-label",r),t):null}function vr(n){n&&_d&&_d.activeElement&&sb_st(function(){var n=_d.activeElement;if(!lt(n)){sj_evt.fire(i.HoverStopEvt);return}},10)}function yr(){ht===!0?nt||(nt=function(){sj_evt.fire(VRHConsts.StopPlayEvt,d);et();sj_evt.fire(VRHConsts.HoverCleanupEvt)}):(sj_evt.fire(VRHConsts.StopPlayEvt,d),et());sj_evt.fire(VRHConsts.HoverCleanupEvt)}function pr(n){while(n){if(n.tagName=="a"||n.tagName=="A")return!0;n=n.parentNode&&n.parentNode!=n?n.parentNode:null}return!1}function wr(n,t){if(typeof n!=f&&typeof t!=f&&typeof enableMockImages!==f&&enableMockImages()){var r=n.split(","),i=tr.split(",");return i.length=Math.min(r.length,t),i.join(",")}return n}function br(n){var f,r,u,e;if(n&&n.length>2){if(f=n[2],r=n[1],!r||!r.containerHeight||!r.containerWidth||!r.videoRichHoverMetaData)return;if(ht===!0){sj_evt.fire(VRHConsts.HoverCleanupEvt);return}if(f&&f!==t)gr(r),t==null||t.hasAttribute(nr)||et(),t=f,ut=r,w=r.scaledCanvasEl;else return;if(u=g[r.containerId],!u)return;y=u;ht=!0;nt=null;ct=null;tt!=null&&t.hasAttribute(i.BoundarySizePersistedAttachedStr)&&t!=tt&&(c(tt,p),tt=null,w&&c(w,p));t.hasAttribute(i.BoundarySizeScaleAttachedStr)&&(v(t,p),w&&v(w,p));e=r.hoverDelayMsOverwrite!=null&&!isNaN(r.hoverDelayMsOverwrite)&&r.hoverDelayMsOverwrite>=0?r.hoverDelayMsOverwrite:u.hoverdelayms;sb_st(function(){sj_evt.fire(i.HoverStartEvt,r.instMetaData,r.triggerType);_w!==_w.parent&&MMMessenger.Post(_w.parent,VRHEnums.IframeMessage.PreviewStarted,null);cr(r);nt&&(nt(),nt=null);ht=!1;r.triggerType==VRHEnums.TriggerType.AutoplayTrigger&&u.enAutoPlayNext&&(ct=pi)},e);dr(r)}}function kr(n,t){var i,u,f;if(n!=null&&t!=null){var o=vt(n),e=o.split(" "),r=t;for(i=0;i<e.length;i++)if(u=b(e[i],t),u){r=u;break}r.innerHTML=n.innerHTML;f=b(gi,r);f&&yi(f)}}function dr(n){var i=n.videoRichHoverMetaData,t;i!=null&&(t=n.linkTargetEl,t!=null&&(a(t,"href",i.purl),a(t,"aria-label",i.vt)))}function yi(n){if(t&&t.parentElement&&t.hasAttribute(i.BoundarySizeScaleAttachedStr)){var o=t.parentElement,u=ri(t)[0],f=rt(t),s=rt(o),e=ui("scrollbar",t),r=e!=null?u-e.scrollLeft:u;r<s-r-f&&si(n,r+f+ir)}}function gr(n){var e=n.containerId,u=g[e],t,r,i;if(u!=null&&(t=n.videoRichHoverMetaData,t!=null)&&(r=n.playerThumbnailEl,i=n.playerTargetEl,r!=null&&i!=null)){var o=t.thid,s=t.at,h=i.clientWidth,c=i.clientHeight,l=u.pid,f=ThUrlGenerator.NewThumbnailUrl(o,s,h,c,l,ThUrlGenerator.CroppingType.SmartRatio,ThUrlGenerator.ResizeMode.Ratio);f!=null&&a(r,"src",f)}}function pi(){sj_evt.fire(i.AutoPlayNext)}function nu(n){lt(sj_mo(n))||sj_evt.fire(i.HoverStopEvt,n)}function tu(){t&&v(t,"onhov");s&&v(s,"onhov")}function iu(){t&&(c(t,"onhov"),t.hasAttribute(i.BoundarySizePersistedAttachedStr)?tt=t:t.hasAttribute(i.BoundarySizeScaleAttachedStr)&&(c(t,p),c(w,p)));s&&c(s,"onhov")}function ru(){t&&v(t,"mmsts")}function wi(){t&&c(t,"mmsts")}function uu(n){var o=sj_et(n),s,u,r,e;if(lt(o)&&!pr(o)&&t&&ki()&&ut&&((new Image).src=_G.gpUrl+"IG="+_G.IG+"&"+it(t,"h"),s=ut.hoverType,u=!1,s===VRHEnums.HoveredElementType.Adult?(typeof AnsSSDlg!=f&&typeof AnsSSDlg.sw=="function"&&AnsSSDlg.sw(n,"vdo_ans_ss_dlg"),u=!0):n.ctrlKey||n.button==1||(r=eu(fu(t,y?y.bindInfos:null)),r&&(e=document.createEvent("MouseEvents"),e.initMouseEvent("click",!0,!0,_w,0,0,0,0,0,n.ctrlKey,n.altKey,n.shiftKey,n.metaKey,n.button,r),r.dispatchEvent(e),typeof si_ct=="function"&&si_ct(r)),u=!0),sj_evt.fire(i.HoverDisableEvt,VRHEnums.HoveredElementType.Algo),et(),u)){sj_pd(n);sj_sp(n);return}}function fu(n,t){var r;if(n&&t)for(r=0;r<t.length;r++){for(var u=t[r],f=u.target,i=n;i&&!k(i,f.bcn);)i=i.parentElement;if(i)return i}return null}function bi(n){return n?n.getElementsByTagName("a"):null}function eu(n){var i=bi(n),t;if(i)for(t=0;t<i.length;t++)if(!lt(i[t]))return i[t];return n}function lt(n){while(n!=null){if(k(n,di))return!0;n=n.parentNode&&n.parentNode!=n?n.parentNode:null}return!1}function ki(){return r!=null||e!=null||o!=null}function et(){wi();iu();ki()&&(ou()&&sj_evt.fire(i.HoverVisible,t,!1),su(),sj_evt.fire(VRHConsts.HoverMouseOutEvt,d));d=null;t=null;ut=null}function ou(){var n=null;return r!=null&&r.parentElement!=null&&(n=r.parentElement,n.removeChild(r)),e!=null&&e.parentElement!=null&&(n=e.parentElement,n.removeChild(e)),o!=null&&o.parentElement!=null&&(n=o.parentElement,n.removeChild(o)),l!=null&&l.parentElement!=null&&(n=l.parentElement,n.removeChild(l)),n!=null}function su(){r!=null&&(r.innerHTML=null,r=null);e!=null&&(e.innerHTML=null,e=null);o!=null&&(o.innerHTML=null,o=null)}function hu(n,t,i){var r=cu(t,n,i);return r?(ii(t,r.l,r.t),!0):!1}function cu(n,t,i){var e,h,c;if(!i||!n||!t||(e=hr(t,vi(y.boundaryElIds)),!e))return null;var f=lu(e,i),l=ei(t,e,y.sd),r=l[0],u=l[1],o=rt(t),s=yt(t);if(f.l>r+o/2||f.t>u+s/2||f.r<r+o/2||f.b<u+s/2)return null;h=rt(n);c=yt(n);r-=(h-o)/2;r=Math.ceil(r);r=Math.min(r,f.r-h-2);r=Math.max(r,f.l);switch(i.va){case VRHEnums.HoverVerticalAlignType.Top:break;case VRHEnums.HoverVerticalAlignType.Middle:default:u-=(c-s)/2}return u=Math.floor(u),u=Math.min(u,f.b-c-2),u=Math.max(u,f.t),{l:r,t:u}}function lu(n){var t=n?0:sb_de.scrollLeft,i=n?0:sb_de.scrollTop,r=n.clientWidth,u=n.clientHeight;return{l:t,t:i,r:r,b:u}}var ot="VRTP",di="vrhc",wt="vrhtpc",bt="vhcic",kt="vrhcs",dt="vrhcac",gi="mc_vtvc_meta_w",nr="bpatt",p="scale",f="undefined",tr="0.000,60.000,120.000,180.000",ir=16,u=typeof pMMUtils!=f?pMMUtils:null,gt=typeof SmartEvent!=f?SmartEvent:null,at=typeof VideoRichHoverUtils!=f?VideoRichHoverUtils:null,i=typeof VRHConsts!=f?VRHConsts:null,h=null,r=null,t=null,e=null,o=null,l=null,s=null,tt=null,w=null,ni=!1,st=null,rr=null,it=null,ti=null,a=null,vt=null,ii=null,rt=null,yt=null,ri=null,b=null,ui=null,k=null,fi=null,ei=null,oi=null,si=null,ht=!1,v=null,c=null,hi=null,ci=null,y=null,ut,d=null,g={},nt,ct=null;n.init=fr;ur()}(VideoRichHover||(VideoRichHover={}))